---
---

<style is:global>
  #social {
    box-sizing: border-box;
    padding: 1rem;
    background-color: #ddd;
  }
  #social:not(:target) {
    display: none;
  }
</style>

<script>
  // This is a super week version of this.
  // I think a component would clean this up dramatically.
  // But cool to see how it comes together in "vinalla" Astro.
  window.addEventListener("DOMContentLoaded", () => {
    // typescript DOM manipulation: https://www.typescriptlang.org/docs/handbook/dom-manipulation.html
    const target_container = document.getElementById("social");
    const page_links = document.querySelectorAll(
      'a[href^="https://"]'
    );
    // filtering elements in NodeList: https://stackoverflow.com/a/6791385
    const list_fragment = document.createDocumentFragment();

    // can i use forof
    for (let i = 0; i < page_links.length; i++) {
      const list_item = document.createElement("li");
      list_item.appendChild(page_links[i]);
      list_fragment.appendChild(list_item);
    }

    const container = document.createElement("ul");
    container.appendChild(list_fragment);

    target_container?.appendChild(container);

    // document fragment: https://stackoverflow.com/questions/14910196/how-to-add-multiple-divs-with-appendchild/14910308#14910308
  });
</script>
