---
import PostMeta from "@components/header-post-meta.astro";
import Layout from "@layouts/Layout.astro";
import { getCollection } from "astro:content";
import { compareByDate } from "@modules/collection";
import config from "../../../astro.config.mjs";

let decisions = await getCollection("decision", ({ data }) =>
  data.status.startsWith("Supercedes")
);

decisions.sort((a, b) =>
  compareByDate(a.data.date, b.data.date)
);
---

<Layout>
  <main class="prose">
    <ul>
      {
        decisions.map((decision) => (
          <li>
            <a href={`/decisions/${decision.slug}`}>
              {decision.data.title}
            </a>
          </li>
        ))
      }
    </ul>
  </main>
  <PostMeta
    title="All chantastic decisions"
    url={new URL(
      "/decisions/supercedes",
      config.site
    ).toString()}
    slot="page-meta"
  />
</Layout>
